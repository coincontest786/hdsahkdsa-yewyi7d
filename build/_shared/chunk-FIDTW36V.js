import{a as re}from"/build/_shared/chunk-HIQL2F4J.js";import{a as te,b as ne}from"/build/_shared/chunk-FEIGB7G5.js";import{a as oe}from"/build/_shared/chunk-G44LSF5L.js";import{a as be}from"/build/_shared/chunk-PUUNJBCK.js";import{a as ve}from"/build/_shared/chunk-UJHLW63H.js";import{d as ee}from"/build/_shared/chunk-G6CDRCV7.js";import{c as H,d as Y,p as Q,t as X,y as Z}from"/build/_shared/chunk-ZE7WC5SJ.js";import{d as U,g as V,h as s,i as f}from"/build/_shared/chunk-BQCUINC5.js";f();f();var q=U(be(),1),n=U(V(),1),he="https://challenges.cloudflare.com/turnstile/v0/api.js",B="cf-turnstile-script",ie="onloadTurnstileCallback",we="cf-turnstile",xe=r=>!!document.querySelector(`#${r}`),ye=({render:r="explicit",onLoadCallbackName:c=ie,scriptOptions:{nonce:i="",defer:e=!0,async:a=!0,id:g="",appendTo:h}={}})=>{let b=g||B,u=document.createElement("script");u.id=b,u.src=`${he}?onload=${c}&render=${r}`,u.defer=!!e,u.async=!!a,i&&(u.nonce=i),(h==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(u)},E={normal:{width:300,height:65},compact:{width:130,height:120},invisible:{width:0,height:0,overflow:"hidden"}};function Se(r){let c;return r!=="invisible"&&(c=r),c}var Te=({as:r="div",...c},i)=>(0,q.jsx)(r,{...c,ref:i}),Ee=(0,n.forwardRef)(Te);function Ie(r=B){let[c,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=()=>{xe(r)&&i(!0)},a=new MutationObserver(e);return a.observe(document,{childList:!0,subtree:!0}),e(),()=>{a.disconnect()}},[r]),c}var G=(0,n.forwardRef)((r,c)=>{let{scriptOptions:i,options:e={},siteKey:a,onSuccess:g,onExpire:h,onError:b,onBeforeInteractive:u,onAfterInteractive:w,onUnsupported:I,id:F,style:$,as:A="div",injectScript:_=!0,...z}=r,m=e.size??"normal",[R,x]=(0,n.useState)(e.execution==="execute"?E.invisible:E[m]),d=(0,n.useRef)(null),N=(0,n.useRef)(!1),[l,y]=(0,n.useState)(),[S,P]=(0,n.useState)(!1),C=i?.id||B,T=Ie(C),L=F??we,t=`${i?.onLoadCallbackName||ie}#${L}`,p=(0,n.useMemo)(()=>({sitekey:a,action:e.action,cData:e.cData,callback:g,"error-callback":b,"expired-callback":h,"before-interactive-callback":u,"after-interactive-callback":w,"unsupported-callback":I,theme:e.theme??"auto",language:e.language??"auto",tabindex:e.tabIndex,"response-field":e.responseField,"response-field-name":e.responseFieldName,size:Se(m),retry:e.retry??"auto","retry-interval":e.retryInterval??8e3,"refresh-expired":e.refreshExpired??"auto",execution:e.execution??"render",appearance:e.appearance??"always"}),[a,e,g,b,h,m,u,w,I]),K=(0,n.useMemo)(()=>JSON.stringify(p),[p]);return(0,n.useImperativeHandle)(c,()=>{if(typeof window>"u"||!T)return;let{turnstile:o}=window;return{getResponse(){if(!o?.getResponse||!l){console.warn("Turnstile has not been loaded");return}return o.getResponse(l)},reset(){if(!o?.reset||!l){console.warn("Turnstile has not been loaded");return}e.execution==="execute"&&x(E.invisible),o.reset(l)},remove(){if(!o?.remove||!l){console.warn("Turnstile has not been loaded");return}y(""),x(E.invisible),o.remove(l)},render(){if(!o?.render||!d.current||l){console.warn("Turnstile has not been loaded or widget already rendered");return}let v=o.render(d.current,p);return y(v),e.execution!=="execute"&&x(E[m]),v},execute(){if(e.execution==="execute"){if(!o?.execute||!d.current||!l){console.warn("Turnstile has not been loaded or widget has not been rendered");return}o.execute(d.current,p),x(E[m])}}}},[T,l,e.execution,m,p,d]),(0,n.useEffect)(()=>(window[t]=()=>P(!0),()=>{delete window[t]}),[t]),(0,n.useEffect)(()=>{_&&!S&&ye({onLoadCallbackName:t,scriptOptions:i})},[_,S,t,i]),(0,n.useEffect)(()=>{!_&&T&&!S&&window.turnstile&&P(!0)},[_,S,T]),(0,n.useEffect)(()=>{if(!a){console.warn("sitekey was not provided");return}if(!T||!d.current||!S||N.current)return;let o=window.turnstile.render(d.current,p);y(o),N.current=!0},[T,a,p,N,S]),(0,n.useEffect)(()=>{if(d.current&&l){window.turnstile.remove(l);let o=window.turnstile.render(d.current,p);y(o),N.current=!0}},[K,a]),(0,n.useEffect)(()=>{x(e.execution==="execute"?E.invisible:E[m])},[e.execution,m]),(0,q.jsx)(Ee,{ref:d,as:A,id:L,style:{...R,...$},...z})});G.displayName="Turnstile";Z();var D=U(ve()),k=U(V());f();var j={ariel:"font-ariel",bitter:"font-bitter",courier:"font-courier",didot:"font-didot",garamound:"font-garamound",georgia:"font-georgia",helvetica:"font-helvetica",lora:"font-lora","lucida-console":"font-lucida-console",merriweather:"font-merriweather",monaco:"font-monaco","helvetica-neue-condensed-black":"font-helvetica-neue-condensed-black","space-grotesk":"font-space-grotesk",montserrat:"font-montserrat","open-sans":"font-open_sans",palatino:"font-palatino","playfair-display":"font-playfair-display",poppins:"font-poppins",roboto:"font-roboto","times-new-roman":"font-times-new-roman","trebuchet-ms":"font-trebuchet-ms",verdana:"font-verdana"};f();Z();var _e=()=>{let r=Q()[0];if(!r)throw new Error("This hook should only be called in child routes to root");return r.data.ref},se=_e;f();var Ne=({name:r,category:c,action:i,label:e=window.location.href,value:a=0,data:g={}})=>{let h=new Date,b={event:r,eventProps:{category:c,action:i,label:e,value:a,timestamp:h.toISOString(),...g}};typeof window.dataLayer!="undefined"&&window.dataLayer.push(b)},ae={pushEvent:Ne};var ke=({type:r="none",cta:c,publication:i,onEmailChange:e,onSuccess:a,recaptchaSiteKey:g,widgetId:h,isCustomLPTheme:b=!1,placeholderText:u,fontFamily:w,backgroundColor:I,textColor:F,autoFocus:$=!1})=>{var J;let{t:A}=ee(),_=Y(),z=re(),m=te(),{pathname:R}=H(),[x,d]=ne(),N=se(),[l,y]=(0,k.useState)(null),[S,P]=(0,k.useState)("invisible"),C=i.web_template.enable_recaptcha,T=C&&!l,L=X(),t=L.data,p=L.state==="submitting",o=i.web_template.signup_flow.filter(({enabled:O})=>O),v=o[0],W=o.length>0&&((J=o==null?void 0:o[0])==null?void 0:J.managed_type)!=="custom",ce=Boolean(v)&&!v.full_url.startsWith(i.url),M=r==="popup"||r==="gated"||r==="form",le=(0,k.useMemo)(()=>M?R:v?`${v.href}?email=${x}`:"/",[v,R,x,M]),de=c||i.cta_text,{double_opt_required:ue,has_referral_program:pe,private:me,require_subscriber_approval:fe}=i,ge=Boolean(ue||pe&&N);return oe(t==null?void 0:t.toast),(0,k.useEffect)(()=>{if((t==null?void 0:t.dataLayerEvent)&&(ae.pushEvent(t.dataLayerEvent),C&&P("invisible")),!M&&(t==null?void 0:t.redirectTo)&&W){let O={startedAt:new Date().toISOString(),currentIndex:0,nextIndex:1,redirects:o};localStorage.setItem("signup_redirects",JSON.stringify(O))}!M&&(t==null?void 0:t.redirectTo)&&(Boolean(v)&&ce?(window.open(t==null?void 0:t.redirectTo,"_blank"),_("/")):_(t==null?void 0:t.redirectTo)),(t==null?void 0:t.redirectTo)&&a&&a()},[t]),z||me&&!fe?null:s.createElement("div",{className:"flex w-full flex-col items-center space-y-4"},s.createElement(L.Form,{method:"post",action:"/create",className:"group w-full rounded-wt bg-transparent"},s.createElement("input",{hidden:!0,name:"ref",value:N||"",onChange:()=>null}),s.createElement("input",{name:"redirect_path",type:"hidden",value:le}),s.createElement("input",{name:"cf-turnstile-response",type:"hidden",value:l||""}),s.createElement("input",{name:"double_opt",type:"hidden",value:ge.toString()}),s.createElement("input",{name:"trigger_redirect",type:"hidden",value:W.toString()}),s.createElement("input",{hidden:!0,name:"visit_token",value:m||"",onChange:()=>null}),s.createElement("div",{className:"w-full sm:mx-auto sm:flex"},s.createElement("div",{className:"w-full"},s.createElement("input",{type:"email",name:"email",autoFocus:$,required:!0,style:{...I&&{borderColor:I}},className:(0,D.default)(w?j[w]:"wt-button-font",b?"border-lp-main-signup-bg-color focus:border-lp-main-signup-bg-color":"border-wt-primary focus:border-wt-primary","block w-full rounded-wt border-2 bg-white px-5 py-3 text-sm text-base font-light text-black placeholder-gray-400 shadow-none placeholder:text-sm focus:outline-none sm:rounded-r-none sm:shadow-md sm:shadow-none"),onChange:O=>{d(O.target.value),e&&e(O.target.value)},placeholder:u||A("subscribe.email_placeholder")||""})),s.createElement("div",{className:"mt-2 sm:mt-0"},s.createElement("input",{type:"submit",value:p?`${A("shared.actions.submitting")}...`:de,style:{...I&&{backgroundColor:I},...F&&{color:F}},className:(0,D.default)(w?j[w]:"wt-button-font",b?"text-lp-main-signup-cta-color bg-lp-main-signup-bg-color text-lp-main-signup-text-color":"bg-wt-primary text-wt-text-on-primary","block h-full w-full cursor-pointer rounded-wt border border-transparent px-5 py-3 text-sm font-medium transition duration-200 sm:rounded-l-none sm:px-10 sm:text-base"),disabled:p||T})))),C&&s.createElement(G,{siteKey:g||"",id:h,onSuccess:y,onUnsupported:()=>y("invalid-token"),onError:()=>y("invalid-token"),onBeforeInteractive:()=>P("normal"),options:{theme:"light",size:S,appearance:"interaction-only"}}))},Je=ke;export{Je as a};