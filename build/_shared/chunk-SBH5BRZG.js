import{a as ie}from"/build/_shared/chunk-IGCHGWVU.js";import{c as se,d as G,e as Q,g as V,h as ve}from"/build/_shared/chunk-CY5473SF.js";import{a as W,b as J,c as ce}from"/build/_shared/chunk-OQ5IMCIA.js";import{a as z}from"/build/_shared/chunk-HBA2H4UX.js";import{a as $,c as le,d as ae,e as ue,h as N}from"/build/_shared/chunk-5DCFALQ2.js";import{a as re}from"/build/_shared/chunk-MRY5SXDL.js";import{a as q,b as U}from"/build/_shared/chunk-JR3LCQKS.js";import{c as b,e as x,f as L,g as pe,h as A,i as H,k as M,l as K,n as D}from"/build/_shared/chunk-CKAJJNIC.js";import{d as fe,g as me,i as ne}from"/build/_shared/chunk-BQCUINC5.js";ne();var o=fe(me(),1);var Pe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Pe||{}),be=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(be||{}),Se={[0]:e=>({...e,popoverState:L(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,a){return e.button===a.button?e:{...e,button:a.button}},[3](e,a){return e.buttonId===a.buttonId?e:{...e,buttonId:a.buttonId}},[4](e,a){return e.panel===a.panel?e:{...e,panel:a.panel}},[5](e,a){return e.panelId===a.panelId?e:{...e,panelId:a.panelId}}},X=(0,o.createContext)(null);X.displayName="PopoverContext";function _(e){let a=(0,o.useContext)(X);if(a===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,_),n}return a}var Y=(0,o.createContext)(null);Y.displayName="PopoverAPIContext";function Z(e){let a=(0,o.useContext)(Y);if(a===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Z),n}return a}var ee=(0,o.createContext)(null);ee.displayName="PopoverGroupContext";function de(){return(0,o.useContext)(ee)}var te=(0,o.createContext)(null);te.displayName="PopoverPanelContext";function ye(){return(0,o.useContext)(te)}function Ee(e,a){return L(a.type,Se,e,a)}var ge="div",Ie=K(function(e,a){var n;let f=`headlessui-popover-button-${x()}`,r=`headlessui-popover-panel-${x()}`,c=(0,o.useRef)(null),g=A(a,pe(t=>{c.current=t})),I=(0,o.useReducer)(Ee,{popoverState:1,button:null,buttonId:f,panel:null,panelId:r,beforePanelSentinel:(0,o.createRef)(),afterPanelSentinel:(0,o.createRef)()}),[{popoverState:d,button:i,panel:l,beforePanelSentinel:B,afterPanelSentinel:T},m]=I,u=V((n=c.current)!=null?n:i);(0,o.useEffect)(()=>m({type:3,buttonId:f}),[f,m]),(0,o.useEffect)(()=>m({type:5,panelId:r}),[r,m]);let v=(0,o.useMemo)(()=>{if(!i||!l)return!1;for(let t of document.querySelectorAll("body > *"))if(Number(t==null?void 0:t.contains(i))^Number(t==null?void 0:t.contains(l)))return!0;return!1},[i,l]),S=(0,o.useMemo)(()=>({buttonId:f,panelId:r,close:()=>m({type:1})}),[f,r,m]),y=de(),h=y==null?void 0:y.registerPopover,O=b(()=>{var t;return(t=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?t:(u==null?void 0:u.activeElement)&&((i==null?void 0:i.contains(u.activeElement))||(l==null?void 0:l.contains(u.activeElement)))});(0,o.useEffect)(()=>h==null?void 0:h(S),[h,S]),ve(u==null?void 0:u.defaultView,"focus",t=>{var s,P,k,R;d===0&&(O()||!i||!l||(P=(s=B.current)==null?void 0:s.contains)!=null&&P.call(s,t.target)||(R=(k=T.current)==null?void 0:k.contains)!=null&&R.call(k,t.target)||m({type:1}))},!0),se([i,l],(t,s)=>{m({type:1}),ue(s,ae.Loose)||(t.preventDefault(),i==null||i.focus())},d===0);let w=b(t=>{m({type:1});let s=(()=>t?t instanceof HTMLElement?t:t.current instanceof HTMLElement?t.current:i:i)();s==null||s.focus()}),p=(0,o.useMemo)(()=>({close:w,isPortalled:v}),[w,v]),F=(0,o.useMemo)(()=>({open:d===0,close:w}),[d,w]),E=e,C={ref:g};return o.default.createElement(X.Provider,{value:I},o.default.createElement(Y.Provider,{value:p},o.default.createElement(ce,{value:L(d,{[0]:W.Open,[1]:W.Closed})},M({ourProps:C,theirProps:E,slot:F,defaultTag:ge,name:"Popover"}))))}),he="button",Fe=K(function(e,a){let[n,f]=_("Popover.Button"),{isPortalled:r}=Z("Popover.Button"),c=(0,o.useRef)(null),g=`headlessui-focus-sentinel-${x()}`,I=de(),d=I==null?void 0:I.closeOthers,i=ye(),l=i===null?!1:i===n.panelId,B=A(c,a,l?null:t=>f({type:2,button:t})),T=A(c,a),m=V(c),u=b(t=>{var s,P,k;if(l){if(n.popoverState===1)return;switch(t.key){case D.Space:case D.Enter:t.preventDefault(),(P=(s=t.target).click)==null||P.call(s),f({type:1}),(k=n.button)==null||k.focus();break}}else switch(t.key){case D.Space:case D.Enter:t.preventDefault(),t.stopPropagation(),n.popoverState===1&&(d==null||d(n.buttonId)),f({type:0});break;case D.Escape:if(n.popoverState!==0)return d==null?void 0:d(n.buttonId);if(!c.current||(m==null?void 0:m.activeElement)&&!c.current.contains(m.activeElement))return;t.preventDefault(),t.stopPropagation(),f({type:1});break}}),v=b(t=>{l||t.key===D.Space&&t.preventDefault()}),S=b(t=>{var s,P;z(t.currentTarget)||e.disabled||(l?(f({type:1}),(s=n.button)==null||s.focus()):(t.preventDefault(),t.stopPropagation(),n.popoverState===1&&(d==null||d(n.buttonId)),f({type:0}),(P=n.button)==null||P.focus()))}),y=b(t=>{t.preventDefault(),t.stopPropagation()}),h=n.popoverState===0,O=(0,o.useMemo)(()=>({open:h}),[h]),w=ie(e,c),p=e,F=l?{ref:T,type:w,onKeyDown:u,onClick:S}:{ref:B,id:n.buttonId,type:w,"aria-expanded":e.disabled?void 0:n.popoverState===0,"aria-controls":n.panel?n.panelId:void 0,onKeyDown:u,onKeyUp:v,onClick:S,onMouseDown:y},E=Q(),C=b(()=>{let t=n.panel;if(!t)return;function s(){L(E.current,{[G.Forwards]:()=>N(t,$.First),[G.Backwards]:()=>N(t,$.Last)})}s()});return o.default.createElement(o.default.Fragment,null,M({ourProps:F,theirProps:p,slot:O,defaultTag:he,name:"Popover.Button"}),h&&!l&&r&&o.default.createElement(U,{id:g,features:q.Focusable,as:"button",type:"button",onFocus:C}))}),Te="div",we=H.RenderStrategy|H.Static,Ce=K(function(e,a){let[{popoverState:n},f]=_("Popover.Overlay"),r=A(a),c=`headlessui-popover-overlay-${x()}`,g=J(),I=(()=>g!==null?g===W.Open:n===0)(),d=b(l=>{if(z(l.currentTarget))return l.preventDefault();f({type:1})}),i=(0,o.useMemo)(()=>({open:n===0}),[n]);return M({ourProps:{ref:r,id:c,"aria-hidden":!0,onClick:d},theirProps:e,slot:i,defaultTag:Te,features:we,visible:I,name:"Popover.Overlay"})}),Oe="div",ke=H.RenderStrategy|H.Static,De=K(function(e,a){let{focus:n=!1,...f}=e,[r,c]=_("Popover.Panel"),{close:g,isPortalled:I}=Z("Popover.Panel"),d=`headlessui-focus-sentinel-before-${x()}`,i=`headlessui-focus-sentinel-after-${x()}`,l=(0,o.useRef)(null),B=A(l,a,p=>{c({type:4,panel:p})}),T=V(l),m=J(),u=(()=>m!==null?m===W.Open:r.popoverState===0)(),v=b(p=>{var F;switch(p.key){case D.Escape:if(r.popoverState!==0||!l.current||(T==null?void 0:T.activeElement)&&!l.current.contains(T.activeElement))return;p.preventDefault(),p.stopPropagation(),c({type:1}),(F=r.button)==null||F.focus();break}});(0,o.useEffect)(()=>{var p;e.static||r.popoverState===1&&((p=e.unmount)!=null?p:!0)&&c({type:4,panel:null})},[r.popoverState,e.unmount,e.static,c]),(0,o.useEffect)(()=>{if(!n||r.popoverState!==0||!l.current)return;let p=T==null?void 0:T.activeElement;l.current.contains(p)||N(l.current,$.First)},[n,l,r.popoverState]);let S=(0,o.useMemo)(()=>({open:r.popoverState===0,close:g}),[r,g]),y={ref:B,id:r.panelId,onKeyDown:v,onBlur:n&&r.popoverState===0?p=>{var F,E,C,t,s;let P=p.relatedTarget;!P||!l.current||(F=l.current)!=null&&F.contains(P)||(c({type:1}),(((C=(E=r.beforePanelSentinel.current)==null?void 0:E.contains)==null?void 0:C.call(E,P))||((s=(t=r.afterPanelSentinel.current)==null?void 0:t.contains)==null?void 0:s.call(t,P)))&&P.focus({preventScroll:!0}))}:void 0,tabIndex:-1},h=Q(),O=b(()=>{let p=l.current;if(!p)return;function F(){L(h.current,{[G.Forwards]:()=>{N(p,$.First)},[G.Backwards]:()=>{var E;(E=r.button)==null||E.focus({preventScroll:!0})}})}F()}),w=b(()=>{let p=l.current;if(!p)return;function F(){L(h.current,{[G.Forwards]:()=>{var E,C,t;if(!r.button)return;let s=le(),P=s.indexOf(r.button),k=s.slice(0,P+1),R=[...s.slice(P+1),...k];for(let j of R.slice())if(((C=(E=j==null?void 0:j.id)==null?void 0:E.startsWith)==null?void 0:C.call(E,"headlessui-focus-sentinel-"))||((t=r.panel)==null?void 0:t.contains(j))){let oe=R.indexOf(j);oe!==-1&&R.splice(oe,1)}N(R,$.First,!1)},[G.Backwards]:()=>N(p,$.Last)})}F()});return o.default.createElement(te.Provider,{value:r.panelId},u&&I&&o.default.createElement(U,{id:d,ref:r.beforePanelSentinel,features:q.Focusable,as:"button",type:"button",onFocus:O}),M({ourProps:y,theirProps:f,slot:S,defaultTag:Oe,features:ke,visible:u,name:"Popover.Panel"}),u&&I&&o.default.createElement(U,{id:i,ref:r.afterPanelSentinel,features:q.Focusable,as:"button",type:"button",onFocus:w}))}),Be="div",Re=K(function(e,a){let n=(0,o.useRef)(null),f=A(n,a),[r,c]=(0,o.useState)([]),g=b(u=>{c(v=>{let S=v.indexOf(u);if(S!==-1){let y=v.slice();return y.splice(S,1),y}return v})}),I=b(u=>(c(v=>[...v,u]),()=>g(u))),d=b(()=>{var u;let v=re(n);if(!v)return!1;let S=v.activeElement;return(u=n.current)!=null&&u.contains(S)?!0:r.some(y=>{var h,O;return((h=v.getElementById(y.buttonId))==null?void 0:h.contains(S))||((O=v.getElementById(y.panelId))==null?void 0:O.contains(S))})}),i=b(u=>{for(let v of r)v.buttonId!==u&&v.close()}),l=(0,o.useMemo)(()=>({registerPopover:I,unregisterPopover:g,isFocusWithinPopoverGroup:d,closeOthers:i}),[I,g,d,i]),B=(0,o.useMemo)(()=>({}),[]),T=e,m={ref:f};return o.default.createElement(ee.Provider,{value:l},M({ourProps:m,theirProps:T,slot:B,defaultTag:Be,name:"Popover.Group"}))}),Qe=Object.assign(Ie,{Button:Fe,Overlay:Ce,Panel:De,Group:Re});export{Qe as a};