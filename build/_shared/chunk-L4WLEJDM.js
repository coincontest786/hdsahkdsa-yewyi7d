import{a as ae}from"/build/_shared/chunk-4LSZPL3Y.js";import{C as ne}from"/build/_shared/chunk-IE27HVSD.js";import{a as Y}from"/build/_shared/chunk-IGCHGWVU.js";import{a as C}from"/build/_shared/chunk-LMUMY6YR.js";import{a as k,b as K,c as X,g as re,j as O}from"/build/_shared/chunk-CY5473SF.js";import{a as A,b as ee,c as te}from"/build/_shared/chunk-OQ5IMCIA.js";import{a as Z}from"/build/_shared/chunk-HBA2H4UX.js";import{d as H,e as q,g as J}from"/build/_shared/chunk-5DCFALQ2.js";import{a as G}from"/build/_shared/chunk-MRY5SXDL.js";import{a as D,c as I,e as M,f as _,h as F,i as B,k as R,l as N,n as m}from"/build/_shared/chunk-CKAJJNIC.js";import{d as z}from"/build/_shared/chunk-G6CDRCV7.js";import{d as U,g as W,h as c,i as h}from"/build/_shared/chunk-BQCUINC5.js";h();var u=U(W(),1);h();function se(e){throw new Error("Unexpected object: "+e)}var g=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(g||{});function oe(e,i){let r=i.resolveItems();if(r.length<=0)return null;let n=i.resolveActiveIndex(),t=n??-1,o=(()=>{switch(e.focus){case 0:return r.findIndex(s=>!i.resolveDisabled(s));case 1:{let s=r.slice().reverse().findIndex((l,p,v)=>t!==-1&&v.length-p-1>=t?!1:!i.resolveDisabled(l));return s===-1?s:r.length-1-s}case 2:return r.findIndex((s,l)=>l<=t?!1:!i.resolveDisabled(s));case 3:{let s=r.slice().reverse().findIndex(l=>!i.resolveDisabled(l));return s===-1?s:r.length-1-s}case 4:return r.findIndex(s=>i.resolveId(s)===e.id);case 5:return null;default:se(e)}})();return o===-1?n:o}h();var E=U(W(),1);function ie({container:e,accept:i,walk:r,enabled:n=!0}){let t=(0,E.useRef)(i),o=(0,E.useRef)(r);(0,E.useEffect)(()=>{t.current=i,o.current=r},[i,r]),D(()=>{if(!e||!n)return;let s=G(e);if(!s)return;let l=t.current,p=o.current,v=Object.assign(x=>l(x),{acceptNode:l}),f=s.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,v,!1);for(;f.nextNode();)p(f.currentNode)},[e,n,t,o])}var le=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(le||{}),ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ue||{}),ce=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ce||{});function j(e,i=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=J(i(e.items.slice()),o=>o.dataRef.current.domRef.current),t=r?n.indexOf(r):null;return t===-1&&(t=null),{items:n,activeItemIndex:t}}var de={[1](e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},[0](e){return e.menuState===0?e:{...e,menuState:0}},[2]:(e,i)=>{var r;let n=j(e),t=oe(i,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:t,activationTrigger:(r=i.trigger)!=null?r:1}},[3]:(e,i)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+i.value.toLowerCase(),t=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(s=>{var l;return((l=s.dataRef.current.textValue)==null?void 0:l.startsWith(n))&&!s.dataRef.current.disabled}),o=t?e.items.indexOf(t):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:o,activationTrigger:1}},[4](e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},[5]:(e,i)=>{let r=j(e,n=>[...n,{id:i.id,dataRef:i.dataRef}]);return{...e,...r}},[6]:(e,i)=>{let r=j(e,n=>{let t=n.findIndex(o=>o.id===i.id);return t!==-1&&n.splice(t,1),n});return{...e,...r,activationTrigger:1}}},$=(0,u.createContext)(null);$.displayName="MenuContext";function L(e){let i=(0,u.useContext)($);if(i===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,L),r}return i}function me(e,i){return _(i.type,de,e,i)}var pe=u.Fragment,fe=N(function(e,i){let r=(0,u.useReducer)(me,{menuState:1,buttonRef:(0,u.createRef)(),itemsRef:(0,u.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:n,itemsRef:t,buttonRef:o},s]=r,l=F(i);X([o,t],(x,T)=>{var y;s({type:1}),q(T,H.Loose)||(x.preventDefault(),(y=o.current)==null||y.focus())},n===0);let p=(0,u.useMemo)(()=>({open:n===0}),[n]),v=e,f={ref:l};return u.default.createElement($.Provider,{value:r},u.default.createElement(te,{value:_(n,{[0]:A.Open,[1]:A.Closed})},R({ourProps:f,theirProps:v,slot:p,defaultTag:pe,name:"Menu"})))}),ve="button",ge=N(function(e,i){var r;let[n,t]=L("Menu.Button"),o=F(n.buttonRef,i),s=`headlessui-menu-button-${M()}`,l=K(),p=I(d=>{switch(d.key){case m.Space:case m.Enter:case m.ArrowDown:d.preventDefault(),d.stopPropagation(),t({type:0}),l.nextFrame(()=>t({type:2,focus:g.First}));break;case m.ArrowUp:d.preventDefault(),d.stopPropagation(),t({type:0}),l.nextFrame(()=>t({type:2,focus:g.Last}));break}}),v=I(d=>{switch(d.key){case m.Space:d.preventDefault();break}}),f=I(d=>{if(Z(d.currentTarget))return d.preventDefault();e.disabled||(n.menuState===0?(t({type:1}),l.nextFrame(()=>{var w;return(w=n.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})})):(d.preventDefault(),t({type:0})))}),x=(0,u.useMemo)(()=>({open:n.menuState===0}),[n]),T=e,y={ref:o,id:s,type:Y(e,n.buttonRef),"aria-haspopup":!0,"aria-controls":(r=n.itemsRef.current)==null?void 0:r.id,"aria-expanded":e.disabled?void 0:n.menuState===0,onKeyDown:p,onKeyUp:v,onClick:f};return R({ourProps:y,theirProps:T,slot:x,defaultTag:ve,name:"Menu.Button"})}),Ie="div",xe=B.RenderStrategy|B.Static,ye=N(function(e,i){var r,n;let[t,o]=L("Menu.Items"),s=F(t.itemsRef,i),l=re(t.itemsRef),p=`headlessui-menu-items-${M()}`,v=K(),f=ee(),x=(()=>f!==null?f===A.Open:t.menuState===0)();(0,u.useEffect)(()=>{let a=t.itemsRef.current;!a||t.menuState===0&&a!==(l==null?void 0:l.activeElement)&&a.focus({preventScroll:!0})},[t.menuState,t.itemsRef,l]),ie({container:t.itemsRef.current,enabled:t.menuState===0,accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});let T=I(a=>{var P,V;switch(v.dispose(),a.key){case m.Space:if(t.searchQuery!=="")return a.preventDefault(),a.stopPropagation(),o({type:3,value:a.key});case m.Enter:if(a.preventDefault(),a.stopPropagation(),o({type:1}),t.activeItemIndex!==null){let{dataRef:S}=t.items[t.activeItemIndex];(V=(P=S.current)==null?void 0:P.domRef.current)==null||V.click()}k().nextFrame(()=>{var S;return(S=t.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})});break;case m.ArrowDown:return a.preventDefault(),a.stopPropagation(),o({type:2,focus:g.Next});case m.ArrowUp:return a.preventDefault(),a.stopPropagation(),o({type:2,focus:g.Previous});case m.Home:case m.PageUp:return a.preventDefault(),a.stopPropagation(),o({type:2,focus:g.First});case m.End:case m.PageDown:return a.preventDefault(),a.stopPropagation(),o({type:2,focus:g.Last});case m.Escape:a.preventDefault(),a.stopPropagation(),o({type:1}),k().nextFrame(()=>{var S;return(S=t.buttonRef.current)==null?void 0:S.focus({preventScroll:!0})});break;case m.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(o({type:3,value:a.key}),v.setTimeout(()=>o({type:4}),350));break}}),y=I(a=>{switch(a.key){case m.Space:a.preventDefault();break}}),d=(0,u.useMemo)(()=>({open:t.menuState===0}),[t]),w=e,b={"aria-activedescendant":t.activeItemIndex===null||(r=t.items[t.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=t.buttonRef.current)==null?void 0:n.id,id:p,onKeyDown:T,onKeyUp:y,role:"menu",tabIndex:0,ref:s};return R({ourProps:b,theirProps:w,slot:d,defaultTag:Ie,features:xe,visible:x,name:"Menu.Items"})}),be=u.Fragment,he=N(function(e,i){let{disabled:r=!1,...n}=e,[t,o]=L("Menu.Item"),s=`headlessui-menu-item-${M()}`,l=t.activeItemIndex!==null?t.items[t.activeItemIndex].id===s:!1,p=(0,u.useRef)(null),v=F(i,p);D(()=>{if(t.menuState!==0||!l||t.activationTrigger===0)return;let b=k();return b.requestAnimationFrame(()=>{var a,P;(P=(a=p.current)==null?void 0:a.scrollIntoView)==null||P.call(a,{block:"nearest"})}),b.dispose},[p,l,t.menuState,t.activationTrigger,t.activeItemIndex]);let f=(0,u.useRef)({disabled:r,domRef:p});D(()=>{f.current.disabled=r},[f,r]),D(()=>{var b,a;f.current.textValue=(a=(b=p.current)==null?void 0:b.textContent)==null?void 0:a.toLowerCase()},[f,p]),D(()=>(o({type:5,id:s,dataRef:f}),()=>o({type:6,id:s})),[f,s]);let x=I(b=>{if(r)return b.preventDefault();o({type:1}),k().nextFrame(()=>{var a;return(a=t.buttonRef.current)==null?void 0:a.focus({preventScroll:!0})})}),T=I(()=>{if(r)return o({type:2,focus:g.Nothing});o({type:2,focus:g.Specific,id:s})}),y=I(()=>{r||l||o({type:2,focus:g.Specific,id:s,trigger:0})}),d=I(()=>{r||!l||o({type:2,focus:g.Nothing})}),w=(0,u.useMemo)(()=>({active:l,disabled:r}),[l,r]);return R({ourProps:{id:s,ref:v,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,disabled:void 0,onClick:x,onFocus:T,onPointerMove:y,onMouseMove:y,onPointerLeave:d,onMouseLeave:d},theirProps:n,slot:w,defaultTag:be,name:"Menu.Item"})}),$e=Object.assign(fe,{Button:ge,Items:ye,Item:he});h();var Q=U(W());var Te=({isOpen:e,handleCloseModal:i,publication:r})=>{let{t:n}=z();return c.createElement(O,{appear:!0,show:e,as:Q.Fragment},c.createElement(C,{as:"div",className:"relative",onClose:i},c.createElement(O.Child,{as:Q.Fragment,enter:"ease-out duration-50",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-50",leaveFrom:"opacity-100",leaveTo:"opacity-0"},c.createElement("div",{className:"fixed inset-0 z-20 bg-black bg-opacity-80"})),c.createElement("div",{className:"fixed inset-0 z-20 overflow-y-auto"},c.createElement("div",{className:"flex min-h-full items-center justify-center text-center"},c.createElement(O.Child,{as:Q.Fragment,enter:"ease-out duration-50",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-50",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},c.createElement(C.Panel,{className:"relative -mt-32 w-full max-w-md transform overflow-hidden rounded-md bg-white p-6 text-left align-middle shadow-xl transition-all"},c.createElement("button",{"aria-label":"Close",className:"absolute top-4 right-4",onClick:i},c.createElement(ne,{className:"h-6 w-6 stroke-1 text-gray-400 transition-all hover:text-gray-700"})),c.createElement(C.Title,{as:"h3",className:"tracking-medium pb-1 text-xl font-bold leading-tight text-gray-900 "},n("shared.cta.login_to_pub",{name:r.name})),c.createElement(C.Description,{as:"h5",className:"mb-4 pb-1 text-sm font-light leading-tight tracking-wider text-gray-500"},n("nav.description")),c.createElement("div",{className:"w-full"},c.createElement(ae,{allowSignup:!r.private}))))))))},Je=Te;export{$e as a,Je as b};